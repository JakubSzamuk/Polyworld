(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6452:function(e,t,r){Promise.resolve().then(r.bind(r,4787))},4787:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var a=r(7437),s=r(2265),n=r(5887),l=r(3730),o=r(7973),i=r(6375),c=e=>{let t=(0,s.useRef)(null),[r,n]=(0,s.useState)(),l=()=>{let t=e.dimension,r=e.array;(0,o.hA)();let a=[],s=[],l=[],c=[],m=()=>{let t=e.array,r=e.dimension,a={x:Math.floor(Math.random()*r),y:0,z:Math.floor(Math.random()*r),momentum:0,soilContent:0,reachedBottom:!1};a.y=t[a.x][a.z],c.push(a);let s={value:0,lowestDrop:{},pastDirection:{}},n=!1;e:for(;!n&&a.x>0&&a.z>0&&a.x<r-1&&a.z<r-1;){s={...s,value:0,lowestDrop:{}};let e=!1,l=()=>{for(let e=-1;e<2;e++)for(let t=-1;t<2;t++)o(e,t),s.value>.8&&a.momentum<3&&(a.momentum=a.momentum+1)},o=(r,n)=>{let l=a.y-t[a.x+r][a.z+n];l>s.value&&(e=!0,s.value=l,s.lowestDrop={...a,x:a.x+r,y:t[a.x+r][a.z+n],z:a.z+n},s.pastDirection=()=>({x:a.x+r,y:t[a.x+r][a.z+n],z:a.z+n}))};l(),a={...a,...s.lowestDrop,momentum:a.momentum};let i=e=>{for(let r=-1;r<2;r++)for(let s=-1;s<2;s++)t[a.x+r][a.z+s]+=.4/(e?a.momentum:1)};if(e){let e=s.value-s.value/10*.6;a.soilContent+=e,c.push(a)}else{for(;a.momentum>0&&a.x>0&&a.z>0&&a.x<r-2&&a.z<r-2;){a={...a,...s.pastDirection()},i(!0),a.momentum-=1,c.push(a),l();let e=!0;for(let t=0;t<c.length;t++)c[t].x==s.lowestDrop.x&&c[t].z==s.lowestDrop.z&&(e=!1,n=!0,a.reachedBottom=!0);if(s.value>0&&e)continue e}0==a.momentum&&(i(!1),n=!0,a.reachedBottom=!0)}}};for(let e=0;e<300;e++)m();for(let e=0;e<t-1;e++)for(let n=0;n<t-1;n++){let o=e,m=n,u=1==Math.floor(20*Math.random()),x=new i.Vector3(o-t/2,r[o][m],m-t/2),h=new i.Vector3(o-t/2+1,r[o+1][m],m-t/2),d=new i.Vector3(o-t/2+1,r[o+1][m+1],m-t/2+1),p=new i.Vector3(o-t/2,r[o][m],m-t/2),y=new i.Vector3(o-t/2,r[o][m+1],m-t/2+1),f=new i.Vector3(o-t/2+1,r[o+1][m+1],m-t/2+1),g=r[o][m]>-3?r[o][m]>0?r[o][m]>5?[.8,.8,.8]:[.5,.5,.5]:[.4,.6,.2]:[.5,.45,.4],j=r[o+1][m]>-3?r[o+1][m]>0?r[o+1][m]>5?[.8,.8,.8]:[.5,.5,.5]:[.4,.6,.2]:[.5,.45,.4],v=r[o+1][m+1]>-3?r[o+1][m+1]>0?r[o+1][m+1]>5?[.8,.8,.8]:[.5,.5,.5]:[.4,.6,.2]:[.5,.45,.4],w=r[o][m]>-3?r[o][m]>0?r[o][m]>5?[.8,.8,.8]:[.5,.5,.5]:[.4,.6,.2]:[.5,.45,.4],z=r[o][m+1]>-3?r[o][m+1]>0?r[o][m+1]>5?[.8,.8,.8]:[.5,.5,.5]:[.4,.6,.2]:[.5,.45,.4],b=r[o+1][m+1]>-3?r[o+1][m+1]>0?r[o+1][m+1]>5?[.8,.8,.8]:[.5,.5,.5]:[.4,.6,.2]:[.5,.45,.4];for(let e=0;e<c.length;e++)c[e].x==o&&c[e].z==m&&(g=[.3,.25,.2],j=[.3,.25,.2],v=[.3,.25,.2],w=[.3,.25,.2],z=[.3,.25,.2],b=[.3,.25,.2]);a.push(x,d,h,p,y,f),u&&.4==g[0]&&o>0&&m>0&&!l.includes({x:o-1,y:r[o-1][m-1],z:m-1})&&!l.includes({x:o,y:r[o][m-1],z:m-1})&&!l.includes({x:o-1,y:r[o-1][m],z:m})&&l.push({x:o-t/2,y:r[o][m],z:m-t/2}),s.push(...g,...j,...v,...w,...z,...b)}return n(l),{verticesArr:a,colorAr:new Float32Array(s)}};return(0,s.useEffect)(()=>{e.isLoaded(!1),t.current.geometry.setFromPoints(l().verticesArr),t.current.geometry.attributes.position.count,t.current.geometry.setAttribute("color",new i.BufferAttribute(l().colorAr,3,!0)),t.current.geometry.attributes.color.needsUpdate=!0,t.current.geometry.computeVertexNormals(),e.isLoaded(!0)},[JSON.stringify(e.regen)]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("mesh",{ref:t,children:[(0,a.jsx)("bufferGeometry",{attach:"geometry"}),(0,a.jsx)("meshStandardMaterial",{vertexColors:!0})]}),r?r.map((e,t)=>(0,a.jsxs)("group",{position:[e.x,e.y+2,e.z],children:[(0,a.jsxs)("mesh",{children:[(0,a.jsx)("sphereGeometry",{attach:"geometry"}),(0,a.jsx)("meshStandardMaterial",{attach:"material",color:"green"})]}),(0,a.jsxs)("mesh",{position:[0,-2,0],children:[(0,a.jsx)("cylinderGeometry",{args:[.2,.2,2.4],attach:"geometry"}),(0,a.jsx)("meshStandardMaterial",{attach:"material",color:[.188,.168,.058]})]})]},t)):null]})},m=e=>{let{regen:t,size:r,level:s}=e;return(0,a.jsx)(a.Fragment,{})};function u(){let[e,t]=(0,s.useState)(!1),[r,i]=(0,s.useState)(-2),[u,x]=(0,s.useState)(8),[h,d]=(0,s.useState)(40),[p,y]=(0,s.useState)(.06),[f,g]=(0,s.useState)(),[j,v]=(0,s.useState)(!1),[w,z]=(0,s.useState)(!1),[b,N]=(0,s.useState)(!0),S=()=>{let e=(e,t,r)=>{let a=[];for(let s=0;s<e;s++){a[s]=[];for(let e=0;e<t;e++)a[s][e]=j?r(s*p,e*p)*u*10*(r(s*p,e*p)*u*10)/1e3-6:r(s*p,e*p)*u}return a};(()=>{let t=(0,o.hA)();g(e(h,h,t))})(),z(!w)};return(0,s.useEffect)(()=>{S()},[]),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"w-screen h-screen m-0 p-0 relative bg-gray-400 hideSmall",children:[(0,a.jsx)("div",{className:"h-screen w-screen z-10",children:(0,a.jsxs)(n.Xz,{camera:{position:[5,20,5]},className:"w-screen h-screen",children:[(0,a.jsx)(l.z,{}),(0,a.jsx)("ambientLight",{intensity:1.4}),e?(0,a.jsx)("pointLight",{position:[55,15,55],intensity:800}):null,f?(0,a.jsx)(c,{array:f,regen:w,isLoaded:t,dimension:h}):null,(0,a.jsx)(m,{regen:w,size:h,level:r})]})}),(0,a.jsxs)("div",{className:"absolute top-[20vh] right-0 w-[20vw] h-[60vh] flex flex-col bg-gray-700 borderRadius p-8 opacity-90 z-60 ".concat(b?"":"foldAway"),children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("h1",{className:"displayFont text-2xl text-white w-1/2",children:"Terrain generator!"}),(0,a.jsx)("button",{onClick:()=>N(!b),className:"p-4 bg-white ml-28 text-black displayFont ".concat(b?"translate":"negateFold"),children:(0,a.jsx)("span",{className:"material-symbols-outlined",children:"arrow_forward"})})]}),(0,a.jsxs)("div",{className:"flex mb-4 items-center mt-16 relative w-full",children:[(0,a.jsx)("p",{className:"text-white text-xl displayFont",children:"Normalise?"}),(0,a.jsx)("input",{onChange:()=>v(!j),value:"normalise",type:"checkbox",className:"absolute right-0"})]}),(0,a.jsx)("p",{className:"text-white text-xl displayFont",children:"Amplitude:"}),(0,a.jsx)("input",{type:"range",min:"3",max:"16",value:u,onChange:e=>x(e.target.value)}),(0,a.jsx)("p",{className:"text-white text-xl displayFont mt-4",children:"Size:"}),(0,a.jsx)("input",{type:"range",min:"10",max:"200",value:h,onChange:e=>d(e.target.value)}),(0,a.jsx)("p",{className:"text-white text-xl displayFont mt-4",children:"Frequency:"}),(0,a.jsx)("input",{type:"range",min:"1",max:"14",value:100*p,onChange:e=>y(e.target.value/100)}),(0,a.jsx)("p",{className:"text-white text-xl displayFont mt-4",children:"Water Level:"}),(0,a.jsx)("input",{type:"range",min:"-6",max:"6",value:r,onChange:e=>i(e.target.value)}),(0,a.jsx)("button",{className:"bg-white text-black mt-8 rounded-md p-8 displayFont hover:opacity-80 transition-all",onClick:()=>S(),children:"Generate!"})]})]}),(0,a.jsx)("div",{className:"w-screen h-[50vh] hideLarge flex justify-center items-center absolute top-0",children:(0,a.jsx)("p",{className:"displayFont text-3xl w-[90%]",children:"This Terrain Generator is unavailable on mobile devices"})})]})}}},function(e){e.O(0,[689,454,971,596,744],function(){return e(e.s=6452)}),_N_E=e.O()}]);