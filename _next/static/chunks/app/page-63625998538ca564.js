(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6452:function(e,t,r){Promise.resolve().then(r.bind(r,4787))},4787:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(7437),a=r(2265),l=r(5887),n=r(3730),o=r(7973),i=r(6375),x=e=>{let t=(0,a.useRef)(null),[r,l]=(0,a.useState)(),n=()=>{let t=e.dimension,r=e.array;(0,o.hA)();let s=[],a=[],n=[],x=[],c=()=>{let t=e.array,r=e.dimension,s={x:Math.floor(Math.random()*r),y:0,z:Math.floor(Math.random()*r),momentum:0,soilContent:0};s.y=t[s.x][s.z],x.push(s);let a={value:0,lowestDrop:{},pastDirection:{}},l=!1;e:for(;!l&&s.x>0&&s.z>0&&s.x<r-1&&s.z<r-1;){a={...a,value:0,lowestDrop:{}};let e=!1,n=()=>{if(t[s.x+1][s.z]<s.y){let r=s.y-t[s.x+1][s.z];r>a.value&&(e=!0,a.value=r,a.lowestDrop={...s,x:s.x+1,y:t[s.x+1][s.z],z:s.z},a.pastDirection=()=>({x:s.x+1,y:t[s.x+1][s.z],z:s.z}))}if(t[s.x][s.z+1]<s.y){let r=s.y-t[s.x][s.z+1];r>a.value&&(e=!0,a.value=r,a.lowestDrop={...s,x:s.x,y:t[s.x][s.z+1],z:s.z+1},a.pastDirection=()=>({x:s.x,y:t[s.x][s.z+1],z:s.z+1}))}if(t[s.x+1][s.z+1]<s.y){let r=s.y-t[s.x+1][s.z+1];r>a.value&&(e=!0,a.value=r,a.lowestDrop={...s,x:s.x+1,y:t[s.x+1][s.z+1],z:s.z+1},a.pastDirection=()=>({x:s.x+1,y:t[s.x+1][s.z+1],z:s.z+1}))}if(t[s.x-1][s.z]<s.y){let r=s.y-t[s.x-1][s.z];r>a.value&&(e=!0,a.value=r,a.lowestDrop={...s,x:s.x-1,y:t[s.x-1][s.z],z:s.z},a.pastDirection=()=>({x:s.x-1,y:t[s.x-1][s.z],z:s.z}))}if(t[s.x][s.z-1]<s.y){let r=s.y-t[s.x][s.z-1];r>a.value&&(e=!0,a.value=r,a.lowestDrop={...s,x:s.x,y:t[s.x][s.z-1],z:s.z-1},a.pastDirection=()=>({x:s.x,y:t[s.x][s.z-1],z:s.z-1}))}if(t[s.x-1][s.z-1]<s.y){let r=s.y-t[s.x-1][s.z-1];r>a.value&&(e=!0,a.value=r,a.lowestDrop={...s,x:s.x-1,y:t[s.x-1][s.z-1],z:s.z-1},a.pastDirection=()=>({x:s.x-1,y:t[s.x-1][s.z-1],z:s.z-1}))}a.value>.8&&s.momentum<3&&(s.momentum=s.momentum+1)};if(n(),console.log(s={...s,...a.lowestDrop,momentum:s.momentum}),e)x.push(s);else{for(;s.momentum>0&&s.x>0&&s.z>0&&s.x<r-2&&s.z<r-2;)if(s={...s,...a.pastDirection()},s.momentum-=1,x.push(s),n(),a.value>0)continue e;0==s.momentum&&(l=!0)}}console.log(x)};for(let e=0;e<1;e++)c();for(let e=0;e<t-1;e++)for(let l=0;l<t-1;l++){let o=e,c=l,u=1==Math.floor(20*Math.random()),m=new i.Vector3(o-t/2,r[o][c],c-t/2),h=new i.Vector3(o-t/2+1,r[o+1][c],c-t/2),d=new i.Vector3(o-t/2+1,r[o+1][c+1],c-t/2+1),y=new i.Vector3(o-t/2,r[o][c],c-t/2),p=new i.Vector3(o-t/2,r[o][c+1],c-t/2+1),z=new i.Vector3(o-t/2+1,r[o+1][c+1],c-t/2+1),f=r[o][c]>-3?r[o][c]>0?r[o][c]>5?[.8,.8,.8]:[.5,.5,.5]:[.4,.6,.2]:[.5,.45,.4],g=r[o+1][c]>-3?r[o+1][c]>0?r[o+1][c]>5?[.8,.8,.8]:[.5,.5,.5]:[.4,.6,.2]:[.5,.45,.4],v=r[o+1][c+1]>-3?r[o+1][c+1]>0?r[o+1][c+1]>5?[.8,.8,.8]:[.5,.5,.5]:[.4,.6,.2]:[.5,.45,.4],w=r[o][c]>-3?r[o][c]>0?r[o][c]>5?[.8,.8,.8]:[.5,.5,.5]:[.4,.6,.2]:[.5,.45,.4],j=r[o][c+1]>-3?r[o][c+1]>0?r[o][c+1]>5?[.8,.8,.8]:[.5,.5,.5]:[.4,.6,.2]:[.5,.45,.4],b=r[o+1][c+1]>-3?r[o+1][c+1]>0?r[o+1][c+1]>5?[.8,.8,.8]:[.5,.5,.5]:[.4,.6,.2]:[.5,.45,.4];for(let e=0;e<x.length;e++)x[e].x==o&&x[e].z==c&&(f=[.3,.25,.2],g=[.3,.25,.2],v=[.3,.25,.2],w=[.3,.25,.2],j=[.3,.25,.2],b=[.3,.25,.2]);s.push(m,d,h,y,p,z),u&&.4==f[0]&&o>0&&c>0&&!n.includes({x:o-1,y:r[o-1][c-1],z:c-1})&&!n.includes({x:o,y:r[o][c-1],z:c-1})&&!n.includes({x:o-1,y:r[o-1][c],z:c})&&n.push({x:o-t/2,y:r[o][c],z:c-t/2}),a.push(...f,...g,...v,...w,...j,...b)}l(n);let u=new Float32Array(a);return console.log(s),{verticesArr:s,colorAr:u}};return(0,a.useEffect)(()=>{e.isLoaded(!1),t.current.geometry.setFromPoints(n().verticesArr),t.current.geometry.attributes.position.count,t.current.geometry.setAttribute("color",new i.BufferAttribute(n().colorAr,3,!0)),t.current.geometry.attributes.color.needsUpdate=!0,t.current.geometry.computeVertexNormals(),e.isLoaded(!0)},[JSON.stringify(e.regen)]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("mesh",{ref:t,children:[(0,s.jsx)("bufferGeometry",{attach:"geometry"}),(0,s.jsx)("meshStandardMaterial",{vertexColors:!0})]}),r?r.map((e,t)=>(0,s.jsxs)("group",{position:[e.x,e.y+2,e.z],children:[(0,s.jsxs)("mesh",{children:[(0,s.jsx)("sphereGeometry",{attach:"geometry"}),(0,s.jsx)("meshStandardMaterial",{attach:"material",color:"green"})]}),(0,s.jsxs)("mesh",{position:[0,-2,0],children:[(0,s.jsx)("cylinderGeometry",{args:[.2,.2,2.4],attach:"geometry"}),(0,s.jsx)("meshStandardMaterial",{attach:"material",color:[.188,.168,.058]})]})]},t)):null]})},c=e=>{let{regen:t,size:r,level:l}=e,n=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=[new i.Vector3(0-r/2,l-2,0-r/2),new i.Vector3(r-r/2,l-2,r-r/2),new i.Vector3(r-r/2,l-2,0-r/2),new i.Vector3(0-r/2,l-2,r-r/2),new i.Vector3(r-r/2,l-2,r-r/2),new i.Vector3(0-r/2,l-2,0-r/2)];console.log(n.current),n.current.geometry.setFromPoints(e)},[t,l]),(0,s.jsxs)("mesh",{ref:n,children:[(0,s.jsx)("bufferGeometry",{attach:"geometry"}),(0,s.jsx)("meshStandardMaterial",{attach:"material",color:[.062,.561,.818]})]})};function u(){let[e,t]=(0,a.useState)(!1),[r,i]=(0,a.useState)(-2),[u,m]=(0,a.useState)(8),[h,d]=(0,a.useState)(200),[y,p]=(0,a.useState)(.06),[z,f]=(0,a.useState)(),[g,v]=(0,a.useState)(!1),[w,j]=(0,a.useState)(!1),[b,N]=(0,a.useState)(!0),D=()=>{let e=(e,t,r)=>{let s=[];for(let a=0;a<e;a++){s[a]=[];for(let e=0;e<t;e++)s[a][e]=g?r(a*y,e*y)*u*10*(r(a*y,e*y)*u*10)/1e3-6:r(a*y,e*y)*u}return s};(()=>{let t=(0,o.hA)();f(e(h,h,t))})(),j(!w)};return(0,a.useEffect)(()=>{D()},[]),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"w-screen h-screen m-0 p-0 relative bg-gray-400 hideSmall",children:[(0,s.jsx)("div",{className:"h-screen w-screen z-10",children:(0,s.jsxs)(l.Xz,{camera:{position:[5,20,5]},className:"w-screen h-screen",children:[(0,s.jsx)(n.z,{}),(0,s.jsx)("ambientLight",{intensity:1.4}),e?(0,s.jsx)("pointLight",{position:[55,15,55],intensity:800}):null,z?(0,s.jsx)(x,{array:z,regen:w,isLoaded:t,dimension:h}):null,(0,s.jsx)(c,{regen:w,size:h,level:r})]})}),(0,s.jsxs)("div",{className:"absolute top-[20vh] right-0 w-[20vw] h-[60vh] flex flex-col bg-gray-700 borderRadius p-8 opacity-90 z-60 ".concat(b?"":"foldAway"),children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("h1",{className:"displayFont text-2xl text-white w-1/2",children:"Terrain generator!"}),(0,s.jsx)("button",{onClick:()=>N(!b),className:"p-4 bg-white ml-28 text-black displayFont ".concat(b?"translate":"negateFold"),children:(0,s.jsx)("span",{className:"material-symbols-outlined",children:"arrow_forward"})})]}),(0,s.jsxs)("div",{className:"flex mb-4 items-center mt-16 relative w-full",children:[(0,s.jsx)("p",{className:"text-white text-xl displayFont",children:"Normalise?"}),(0,s.jsx)("input",{onChange:()=>v(!g),value:"normalise",type:"checkbox",className:"absolute right-0"})]}),(0,s.jsx)("p",{className:"text-white text-xl displayFont",children:"Amplitude:"}),(0,s.jsx)("input",{type:"range",min:"3",max:"16",value:u,onChange:e=>m(e.target.value)}),(0,s.jsx)("p",{className:"text-white text-xl displayFont mt-4",children:"Size:"}),(0,s.jsx)("input",{type:"range",min:"10",max:"200",value:h,onChange:e=>d(e.target.value)}),(0,s.jsx)("p",{className:"text-white text-xl displayFont mt-4",children:"Frequency:"}),(0,s.jsx)("input",{type:"range",min:"1",max:"14",value:100*y,onChange:e=>p(e.target.value/100)}),(0,s.jsx)("p",{className:"text-white text-xl displayFont mt-4",children:"Water Level:"}),(0,s.jsx)("input",{type:"range",min:"-6",max:"6",value:r,onChange:e=>i(e.target.value)}),(0,s.jsx)("button",{className:"bg-white text-black mt-8 rounded-md p-8 displayFont hover:opacity-80 transition-all",onClick:()=>D(),children:"Generate!"})]})]}),(0,s.jsx)("div",{className:"w-screen h-[50vh] hideLarge flex justify-center items-center absolute top-0",children:(0,s.jsx)("p",{className:"displayFont text-3xl w-[90%]",children:"This Terrain Generator is unavailable on mobile devices"})})]})}}},function(e){e.O(0,[689,454,971,596,744],function(){return e(e.s=6452)}),_N_E=e.O()}]);